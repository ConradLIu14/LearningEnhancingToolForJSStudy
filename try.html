<html>

<head>
    <title>js24 try.html</title>

    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <style>
        .trafficlights {
            display: flex;
            /* flex-direction: row; */
            height: 100px;
            width: 300px;

        }

        .trafficlight {
            height: 100px;
            width: 100px;
            border: 1px solid black;
        }
    </style>


</head>

<body>
    <script type="text/javascript">
        let trafficlights = document.createElement("div")
        document.body.appendChild(trafficlights)
        let light_green = document.createElement("div")
        let light_yellow = document.createElement("div")
        let light_red = document.createElement("div")
        light_green.setAttribute("class", "trafficlight")
        light_yellow.setAttribute("class", "trafficlight")
        light_red.setAttribute("class", "trafficlight")

        trafficlights.appendChild(light_green)
        trafficlights.appendChild(light_yellow)
        trafficlights.appendChild(light_red)
        trafficlights.setAttribute("class", "trafficlights")

        let p = new Promise((resolve) => {
            light_green.style.backgroundColor = "green"
            setTimeout(() => {
                resolve()
            }, 2000);
        })

        function traffic_toggle(){
            p.then(() => new Promise((resolve) => {
            for (let child of trafficlights.children) child.style.backgroundColor = "white"
            console.log("yellow")
            light_yellow.style.backgroundColor = "yellow"
            setTimeout(() => {
                resolve()
            }, 1000);
        })).then(() => new Promise((resolve) => {
            for (let child of trafficlights.children) child.style.backgroundColor = "white"
            console.log("red")
            light_red.style.backgroundColor = "red"
            setTimeout(() => {
                resolve()
            }, 3000);
        })).then(() => new Promise((resolve) => {
            for (let child of trafficlights.children) child.style.backgroundColor = "white"
            console.log("green")
            light_green.style.backgroundColor = "green"
            setTimeout(() => {
                resolve()
            }, 2000);
        }))
        }

        setInterval(traffic_toggle, 6000)
        
    </script>


</body>

</html>